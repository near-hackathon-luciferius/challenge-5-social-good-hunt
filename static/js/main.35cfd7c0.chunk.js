(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{172:function(e,t,n){},173:function(e){e.exports=JSON.parse('{"name":"hello-react","version":"1.0.4","homepage":"https://near-hackathon-luciferius.github.io/challenge-5-social-good-hunt","private":true,"dependencies":{"@emotion/react":"^11.9.0","@emotion/styled":"^11.8.1","@mui/icons-material":"^5.6.2","@mui/material":"^5.6.2","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","js-sha256":"^0.9.0","materialize-css":"^1.0.0-rc.2","near-api-js":"^0.42.0","react":"^17.0.0","react-burger-menu":"^3.0.6","react-dom":"^17.0.0","react-materialize":"^3.10.0","react-native-sha":"^0.1.6","react-router-dom":"^6.3.0","react-scripts":"4.0.3","save":"^2.4.0","save-dev":"^0.0.1-security","styled-components":"^5.2.0","web-vitals":"^1.0.1"},"scripts":{"start":"parcel src/index.html","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build -u \'Pages Bot <pages.bot@nonexisting.io>\'"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.2.3","parcel-bundler":"^1.12.5"}}')},180:function(e,t){},190:function(e,t){},236:function(e,t,n){"use strict";n.r(t);var r=n(92),a=n(20),c=n(6),o=n.n(c),s=n(0),i=n.n(s),l=n(48),d=n.n(l),u=n(18),h=n(10),p=n(29),j=n.n(p),b=n(12),m=n(1);function g(e){var t=e.signIn;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Social Bounty Hunt Homepage"})}),Object(m.jsx)(b.Button,{small:!0,onClick:t,children:"Log in"}),Object(m.jsx)("p",{children:"This app demonstrates how to mint nfts in with the NEAR blockchain. While minting the app will ask you to deposite 0.1 NEAR but it acutally only uses roughly 0.01 NEAR. The remaining NEAR that is not used gets refunded on completing the smart contrat call."}),Object(m.jsx)("p",{children:"Go ahead and sign in to try it out!"})]})}var f=n(5),O=n(93),x=n(94),v=n.n(x),w=n(96),y=n.n(w),N=function(e){return Object(m.jsx)("div",{className:"popup-box",children:Object(m.jsxs)("div",{className:"box",children:[Object(m.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})},_=function(e){var t=e.currentUser,n=e.signIn,r=e.signOut,a=e.clearMessage,c=e.message;return Object(m.jsxs)("div",{id:"App",children:[Object(m.jsxs)(O.slide,{pageWrapId:"page-wrapper",outerContainerId:"App",children:[Object(m.jsx)(u.b,{className:"menu-item",to:"/",children:"Home"}),Object(m.jsx)(u.b,{className:"menu-item",to:"/publish",children:"Publish Deeds"}),Object(m.jsx)(u.b,{className:"menu-item",to:"/overview",children:"Deed Feed"}),Object(m.jsx)(u.b,{className:"menu-item",to:"/donate",children:"Donate"})]}),Object(m.jsx)("main",{id:"page-wrapper",children:Object(m.jsx)(f.a,{})}),t?Object(m.jsx)(b.Button,{onClick:r,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(v.a,{fontSize:"medium"}),tooltip:"Log out "+t.accountId+"."}):Object(m.jsx)(b.Button,{onClick:n,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(y.a,{fontSize:"medium"}),tooltip:"Log in using NEAR wallet."}),c&&Object(m.jsx)(N,{content:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("b",{children:"A message for you"}),Object(m.jsx)("p",{children:c})]}),handleClose:a})]})},E=n(97),S=n(98),C=n(101),T=n(100),k=n.p+"static/media/404.6fa35088.jpg",A=function(e){Object(C.a)(n,e);var t=Object(T.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(m.jsx)("img",{src:k,alt:"Nothing is here.",width:"900",style:{margin:"10em"}})}}]),n}(i.a.Component),I=A,R=function(e){var t=e.version;e.currentUser;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:["NEAR Challenge #3 - Social Bounty Hunt - ",t]})}),Object(m.jsx)("p",{children:"This app demonstrates how to mint nfts in with the NEAR blockchain. While minting the app will ask you to deposite 0.1 NEAR but it acutally only uses roughly 0.01 NEAR. The remaining NEAR that is not used gets refunded on completing the smart contrat call."}),Object(m.jsx)("p",{children:"The basic idea was to create a DeviantArt for the NEAR chain. So everyone can mint their own artworks and through the marketplace they can then buy physical and digital products from the minted NFTs. This includes, but is not limited to, buying rights to use the images on their websites. The information, who has rights could be stored in the metadata of the NFTs. This site yould then provide tools to check whether a specific webpage has the rights to use the artwork."}),Object(m.jsxs)("h5",{children:["Head over ",Object(m.jsx)(u.b,{className:"menu-item",to:"/publish",children:"here"})," to publish your first social deed. Or look at social deeds others have published so far ",Object(m.jsx)(u.b,{className:"menu-item",to:"/overview",children:"here"}),". Lastly you can ",Object(m.jsx)(u.b,{className:"menu-item",to:"/donate",children:"donate"})," NEAR to all DEED holders and automatically create a deed with that."]})]})};function D(e){var t=e.onPublishDeed;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Publish a social deed."})}),Object(m.jsx)("form",{onSubmit:t,children:Object(m.jsxs)("fieldset",{id:"fieldset",children:[Object(m.jsx)("p",{children:"Describe your social deed and provide prove in form of an image or a gif."}),Object(m.jsx)("p",{children:"When you hit Publish it is possible that there are two transaction to sign. In this case your account is first registered with the contract in order for you to receive the DEED tokens. In the current implementation the registration cancles the actual publish which would need to be executed again after registration."}),Object(m.jsx)("p",{className:"highlight",children:Object(m.jsx)(b.TextInput,{autoComplete:"off",autoFocus:!0,id:"title_prompt",className:"name_input",label:"The title of your deed.",required:!0})}),Object(m.jsx)("p",{className:"highlight",children:Object(m.jsx)(b.TextInput,{autoComplete:"off",id:"description_prompt",className:"name_input",label:"A short description of the deed.",required:!0})}),Object(m.jsx)("p",{className:"highlight",children:Object(m.jsx)(b.TextInput,{autoComplete:"off",id:"proof_prompt",className:"name_input",label:"An URL to an image or of gif as prove of the deed.",required:!0})}),Object(m.jsx)(b.Button,{type:"submit",small:!0,tooltip:"Publishes the social deed to the blockchain.",children:"Publish"})]})})]})}var U=function(e){var t=e.currentUser,n=e.contract,r=e.onCredit,c=Object(s.useState)([]),i=Object(h.a)(c,2),l=i[0],d=i[1];Object(s.useEffect)((function(){function e(){return(e=Object(a.a)(o.a.mark((function e(){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_deeds_count();case 2:return r=e.sent,e.next=5,n.social_deeds({creditor_id:t.accountId,from_index:"0",limit:parseInt(r)});case 5:a=e.sent,console.log(a),d(u(a,2));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t]);var u=function(e,t){for(var n=[],r=0,a=e.length;r<a;)n.push(e.slice(r,r+=t));return n};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"All deeds that were published."})}),l.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s6",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-image",children:Object(m.jsx)("img",{src:e.proof,alt:e.proof})}),Object(m.jsx)("div",{className:"card-title",children:e.title}),Object(m.jsxs)("div",{className:"card-content",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("b",{children:["Author: ",e.author]})}),Object(m.jsx)("p",{children:e.description}),Object(m.jsx)("p",{children:e.is_creditor})]}),Object(m.jsx)("div",{className:"card-action",children:Object(m.jsx)(b.Button,{onClick:function(){return r(e)},small:!0,tooltip:"Give a credit to the deed author.",className:"margin_button",children:"Credit"})})]})},e.id)}))})}))]})};function F(e){var t=e.onDonate;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Donate NEAR."})}),Object(m.jsx)("form",{onSubmit:t,children:Object(m.jsxs)("fieldset",{id:"fieldset",children:[Object(m.jsx)("p",{children:"Here you can donate NEAR."}),Object(m.jsx)("p",{children:"When you hit Donate the chosen amount of NEAR will be distributed to all DEED holders. This excludes your own account as you are doing the donation. Secondly a new deed is automatically created which shows that you donated the chosen amount."}),Object(m.jsx)("p",{className:"highlight",children:Object(m.jsx)(b.TextInput,{autoComplete:"off",id:"donation",defaultValue:"1",max:"100",min:"1",step:"1",type:"number",label:"Add the amount of \u24c3 you want to donate.",required:!0})}),Object(m.jsx)(b.Button,{type:"submit",small:!0,tooltip:"Donates the chosen amount of \u24c3.",children:"Donate"})]})})]})}function H(e){var t=e.onRegister;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Social Bounty Hunt Homepage"})}),Object(m.jsx)(b.Button,{small:!0,onClick:t,children:"Register"}),Object(m.jsx)("p",{children:"To use the DEED token you must be registered to the smart contract. Without that you cannot use it. There is a small fee to pay for the registration in order to pay for the used storage."}),Object(m.jsx)("p",{children:"Go ahead and register to finally try the app!"})]})}n(171),n(172);var P=n(173).version;n(174);var B=j()(3).times(Math.pow(10,13)).toFixed(),W=function(e){var t=e.contract,n=e.currentUser,r=e.nearConfig,c=e.wallet,i=(e.provider,e.lastTransaction),l=e.error,d=Object(s.useState)(""),u=Object(h.a)(d,2),p=u[0],b=u[1],O=Object(s.useState)(!1),x=Object(h.a)(O,2),v=x[0],w=x[1],y=function(){var e=Object(a.a)(o.a.mark((function e(r){var a,c,s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),a=r.target.elements,c=a.fieldset,s=a.proof_prompt,i=a.title_prompt,l=a.description_prompt,c.disabled=!0,t.add_deed({author:n.accountId,title:i.value,description:l.value,proof:s.value},B,j()("0.01").times(Math.pow(10,24)).toFixed()).then((function(e){console.log("Successfully published.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(a.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.is_creditor){e.next=3;break}return b("You already credited deed #".concat(n.id)),e.abrupt("return");case 3:t.credit({id:n.id},B,j()("0.002").times(Math.pow(10,24)).toFixed()).then((function(e){console.log("Successfully credited.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(a.a)(o.a.mark((function e(r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage_balance_bounds();case 2:a=e.sent,t.storage_deposit({account_id:n.accountId,registration_only:!0},B,j()(a.min).toFixed()).then((function(e){console.log("Successfully registered.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(a.a)(o.a.mark((function e(n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.target.elements,a=r.fieldset,c=r.donation,a.disabled=!0,t.donate({},B,j()(c.value).times(Math.pow(10,24)).toFixed()).then((function(e){console.log("Successfully donated.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e=function(){var e=Object(a.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.is_registered({account_id:n.accountId});case 2:r=e.sent,w(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,n]),Object(s.useEffect)((function(){l?(b(decodeURI(l)),window.history.pushState({},"",window.location.origin+window.location.pathname)):i&&(b("Successfully executed transaction ".concat(i)),window.history.pushState({},"",window.location.origin+window.location.pathname))}),[i,l]);var C=function(){c.requestSignIn({contractId:r.contractName,methodNames:[t.add_deed.name,t.credit.name,t.donate.name]},"NEAR Challenge #5 - Social Bounty Hunt",null,null)};return Object(m.jsx)(f.d,{children:Object(m.jsxs)(f.b,{path:"/",element:Object(m.jsx)(_,{currentUser:n,signIn:C,signOut:function(){c.signOut(),window.location.replace(window.location.origin+window.location.pathname)},clearMessage:function(){b("")},message:p}),children:[Object(m.jsx)(f.b,{index:!0,element:n?v?Object(m.jsx)(R,{version:P,currentUser:n}):Object(m.jsx)(H,{onRegister:E}):Object(m.jsx)(g,{signIn:C})}),Object(m.jsx)(f.b,{path:"publish",element:n?v?Object(m.jsx)(D,{onPublishDeed:y}):Object(m.jsx)(H,{onRegister:E}):Object(m.jsx)(g,{signIn:C})}),Object(m.jsx)(f.b,{path:"overview",element:n?v?Object(m.jsx)(U,{currentUser:n,contract:t,onCredit:N}):Object(m.jsx)(H,{onRegister:E}):Object(m.jsx)(g,{signIn:C})}),Object(m.jsx)(f.b,{path:"donate",element:n?v?Object(m.jsx)(F,{onDonate:S}):Object(m.jsx)(H,{onRegister:E}):Object(m.jsx)(g,{signIn:C})}),Object(m.jsx)(f.b,{path:"*",element:Object(m.jsx)(I,{})})]})})},L=n(99),M=n.n(L),K=n(36);function q(){return(q=Object(a.a)(o.a.mark((function e(){var t,n,a,c,s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M()(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-5-social-good-hunt",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NEAR_ENV||"testnet"),n=new K.keyStores.BrowserLocalStorageKeyStore,e.next=4,K.connect(Object(r.a)({keyStore:n},t));case 4:if(a=e.sent,!(c=new K.WalletConnection(a)).getAccountId()){e.next=12;break}return e.t0=c.getAccountId(),e.next=10,c.account().state();case 10:e.t1=e.sent.amount,s={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new K.Contract(c.account(),t.contractName,{viewMethods:["is_registered","storage_balance_bounds","get_deeds_count","social_deeds"],changeMethods:["storage_deposit","add_deed","credit","donate"],sender:c.getAccountId()});case 14:return i=e.sent,l=a.connection.provider,e.abrupt("return",{contract:i,currentUser:s,nearConfig:t,walletConnection:c,provider:l});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return q.apply(this,arguments)}().then((function(e){var t,n,r=e.contract,a=e.currentUser,c=e.nearConfig,o=e.walletConnection,s=e.provider,i=new URLSearchParams(window.location.search);i.has("transactionHashes")&&(t=i.get("transactionHashes")),i.has("errorMessage")&&(n=i.get("errorMessage")),d.a.render(Object(m.jsx)(u.a,{children:Object(m.jsx)(W,{contract:r,currentUser:a,nearConfig:c,wallet:o,lastTransaction:t,provider:s,error:n})}),document.getElementById("root"))}))},99:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-5-social-good-hunt",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"social-bounty.cryptosketches.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-5-social-good-hunt",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}}},[[236,1,2]]]);
//# sourceMappingURL=main.35cfd7c0.chunk.js.map